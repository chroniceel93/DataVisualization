<html>
    <style>
        .container {
            width: 100vw;
            height: calc(70vh - 40px);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .child {
            width: 200px;
            padding: 20px;
            border-radius: 20px;
            background: white;
        }

        .favblock {
            display: flex;
            flex-wrap: wrap;
        }
    
        .button {
            background-color: #008CBA;
            border: #555555;
            color: white;
            padding: 15px 25px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 12px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 12px;
            transition-duration: 0.4s;
        }

        .logoutbutton {
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 12px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 12px;
            transition-duration: 0.4s;
        }

        .button:hover {
            background-color: #4CAF50;
            color: white;
        }

        .logoutbutton:hover {
            background-color: #f44336;
            color: white;
        }


        /* styles for slideshow obtain in w3school*/

        * {box-sizing: border-box}
        body {font-family: Verdana, sans-serif; margin:0}
        .mySlides {display: none}
        img {vertical-align: middle;}

        /* Slideshow container */
        .slideshow-container {
        max-width: 1000px;
        position: relative;
        margin: auto;
        }

        /* Next & previous buttons */
        .prev, .next {
        cursor: pointer;
        position: absolute;
        top: 50%;
        width: auto;
        padding: 16px;
        margin-top: -22px;
        color: black;
        font-weight: bold;
        font-size: 18px;
        transition: 0.6s ease;
        border-radius: 0 3px 3px 0;
        user-select: none;
        }

        /* Position the "next button" to the right */
        .next {
        right: 0;
        border-radius: 3px 0 0 3px;
        }

        /* On hover, add a black background color with a little bit see-through */
        .prev:hover, .next:hover {
        background-color: rgba(0,0,0,0.8);
        }

        /* Fading animation */
        .fade {
        -webkit-animation-name: fade;
        -webkit-animation-duration: 1.5s;
        animation-name: fade;
        animation-duration: 1.5s;
        }

        @-webkit-keyframes fade {
        from {opacity: .4} 
        to {opacity: 1}
        }

        @keyframes fade {
        from {opacity: .4} 
        to {opacity: 1}
        }
    </style>

    <body>
        <button class="logoutbutton" onclick="location.href = '/login'">Logout</button><br>
        <button class="button" onclick="location.href = '/'">Make new Graph</button><br>
        <input class="button" type="button" value="Back" onclick="history.back()"><br>
        <div class="container">
            <h3 id="emptymsg" style="display:block;">No Graphs to display</h3>
            <div id="favblock" style="display:none;" class="slideshow-container">
                <h3> Favorite graph</h3>
                <img src="" id="fg"><br>
                <button class="button" onclick="clearfav()" id="fbutton">Clear Favorite</button>
                <button class="button" onclick="exportimage()" id="dbutton">Download Favorite</button><br>

                <div class="mySlides fade" id="tmp1" style="display:none;">
                  <img id="imgtmp1" src="" style="width:100%">
                </div>
                
                <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
                <a class="next" onclick="plusSlides(1)">&#10095;</a>
                
            </div> 

            <script>
                if(typeof(Storage)!=="undefined" && localStorage.myArray){
                    document.getElementById("emptymsg").style.display = "none";
                    var tmpstring = localStorage.getItem('myArray');
                    var tmparray = tmpstring.split(" ");
                    var arraylen = tmparray.length;                    
                    document.getElementById("imgtmp1").src = tmparray[1];
                    document.getElementById("tmp1").style.display = "block";
                    document.getElementById("favblock").style.display = "block";
                }
                else{
                    document.getElementById("emptymsg").style.display = "block";
                }

                function clearfav(){
                    localStorage.removeItem("favgraph");
                    document.getElementById("favblock").style.display = "none";
                    document.getElementById("emptymsg").style.display = "block";
                    var testArray = [];
                    localStorage.setItem('myArray', testArray);
                }

                //function for downloading the graph as an image
                function exportimage(){
                    var a = document.createElement('a');
                    var numindex = slideIndex;
                    a.href = tmparray[slideIndex];
                    console.log(slideIndex)
                    a.download = 'graph.png';
              
                    // Trigger the download
                    a.click();
                }

                //w3school slide show scripts
                var slideIndex = 1;
                showSlides(slideIndex);

                function plusSlides(n) {
                    showSlides(slideIndex += n);
                }

                function currentSlide(n) {
                    showSlides(slideIndex = n);
                }

                function showSlides(n) {
                    if (n >= arraylen) {
                        slideIndex = 1;
                        document.getElementById("imgtmp1").src = tmparray[1];
                    }    
                    else if (n < 1) {
                        slideIndex = arraylen;
                        document.getElementById("imgtmp1").src = tmparray[arraylen - 1];
                    }
                    else{
                        document.getElementById("imgtmp1").src = tmparray[slideIndex];
                    }
                }
            </script>
        </div>
    </body>
</html>